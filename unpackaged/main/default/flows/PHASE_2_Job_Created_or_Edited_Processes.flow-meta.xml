<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Credit_Cust_Email_Confirm_Estimate_Accepted</name>
        <label>Credit Cust Email Confirm. Estimate Accepted</label>
        <locationX>149</locationX>
        <locationY>2543</locationY>
        <actionName>Job__c.Estimate_Acceptance_Confirmation_Credit_Accounts</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Send_deposit_invoice_to_Credit_acc</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Email_Customer</name>
        <label>Email Customer</label>
        <locationX>149</locationX>
        <locationY>3575</locationY>
        <actionName>Job__c.Job_Status_is_Cancelled_inform_Customer_Estimate_is_no_longer_valid</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Set_Date_Time</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Estimate_email_to_Cust_Credit</name>
        <label>Estimate email to Cust (Credit)</label>
        <locationX>149</locationX>
        <locationY>791</locationY>
        <actionName>Job__c.Accept_an_Estimate_Job_Credit_or_Key_Account</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Update_Job</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Lock_Job</name>
        <label>Lock Job</label>
        <locationX>149</locationX>
        <locationY>1271</locationY>
        <actionName>submit</actionName>
        <actionType>submit</actionType>
        <connector>
            <targetReference>Record_has_been_Unlocked_Cash</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>processDefinitionNameOrId</name>
            <value>
                <stringValue>Estimate_Email_sent_to_Cust_lock_Job</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>objectId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skipEntryCriteria</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>comment</name>
            <value>
                <elementReference>EstimatesenttoCustomerforapprovalbytheEngineer</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>submitterId</name>
            <value>
                <elementReference>Get_Administrator.Id</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Pending_Email_to_Customer</name>
        <label>Pending Email to Customer</label>
        <locationX>314</locationX>
        <locationY>5519</locationY>
        <actionName>Job__c.Tradesperson_Booking_Request_Confirmation1</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Pending_Email_to_Customer_credit_acc</name>
        <label>Pending Email to Customer (credit acc)</label>
        <locationX>578</locationX>
        <locationY>5639</locationY>
        <actionName>Job__c.Tradesperson_Booking_Request_Confirmation_Credit_RF</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Send_email_to_Credit_cust</name>
        <label>Send email to Credit cust</label>
        <locationX>149</locationX>
        <locationY>4487</locationY>
        <actionName>Job__c.Accept_an_Estimate_Job_Credit_or_Key_Account</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Update_to_say_sent_email_to_Cust2</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Send_email_to_Cust</name>
        <label>Send email to Cust</label>
        <locationX>149</locationX>
        <locationY>4031</locationY>
        <actionName>Job__c.Accept_an_Estimate_Job</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Update_to_say_sent_email_to_Cust</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Send_Rejected_Email_to_Cust</name>
        <label>Send Rejected Email to Cust</label>
        <locationX>50</locationX>
        <locationY>5399</locationY>
        <actionName>Job__c.Accept_an_Estimate_Job_Credit_or_Key_Account</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Submit_for_Approval_Unlock_Cash</name>
        <label>Submit for Approval (Unlock) (Cash)</label>
        <locationX>149</locationX>
        <locationY>1967</locationY>
        <actionName>submit</actionName>
        <actionType>submit</actionType>
        <connector>
            <targetReference>Record_has_been_Unlocked_Credit</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>processDefinitionNameOrId</name>
            <value>
                <stringValue>Estimate_Approved_UNLOCK_Job</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>objectId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skipEntryCriteria</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>comment</name>
            <value>
                <stringValue>Cash Customer Estimate approved by Customer - record should be UNlocked.</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>submitterId</name>
            <value>
                <elementReference>Get_Administrator_0.Id</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Submit_for_Approval_Unlock_Credit</name>
        <label>Submit for Approval (Unlock) (Credit)</label>
        <locationX>149</locationX>
        <locationY>2903</locationY>
        <actionName>submit</actionName>
        <actionType>submit</actionType>
        <connector>
            <targetReference>Credit_Cust_Commence_Immediate</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>processDefinitionNameOrId</name>
            <value>
                <stringValue>Estimate_Approved_UNLOCK_Job</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>objectId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>skipEntryCriteria</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>comment</name>
            <value>
                <stringValue>Credit Customer Estimate approved by Customer  - record should be UNlocked.</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>submitterId</name>
            <value>
                <elementReference>Get_Administrator_0_0.Id</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>55.0</apiVersion>
    <decisions>
        <name>Credit_Cust_Commence_Immediate</name>
        <label>Credit Cust Commence Immediate</label>
        <locationX>281</locationX>
        <locationY>3119</locationY>
        <defaultConnector>
            <targetReference>Job_Status_Cancelled</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Credit_Cust_Commence_Immediate_True</name>
            <conditionLogic>1 AND 2 AND (3 OR 4) AND 5 AND 6</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Approval_Process_Unlock_Record__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>For Client Approval</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Account_Type_is_Credit</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Account_Type_Key</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Is_Work_Commencing_Immediately__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Estimate_Accepted_Email_Conf_Sent__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_SA_s</targetReference>
            </connector>
            <label>Credit Cust Commence Immediate True</label>
        </rules>
    </decisions>
    <decisions>
        <name>Eng_Req_Estimate_be_sent_to_Cust_Credit</name>
        <label>Eng Req Estimate be sent to Cust Credit</label>
        <locationX>281</locationX>
        <locationY>671</locationY>
        <defaultConnector>
            <targetReference>Record_has_been_Unlocked_Cash</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Eng_Req_Estimate_be_sent_to_Cust_Credit_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Engineer_requests_Estimate_email_be_sent__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account__r.Comms_Control_Estimate_Emails__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Account_Type_is_Credit</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Estimate_email_to_Cust_Credit</targetReference>
            </connector>
            <label>Eng Req Estimate be sent to Cust Credit True</label>
        </rules>
    </decisions>
    <decisions>
        <name>ISNEW_AND_Auth_Not_Blank_Des</name>
        <label>ISNEW() AND Auth Not Blank</label>
        <locationX>281</locationX>
        <locationY>335</locationY>
        <defaultConnector>
            <targetReference>Eng_Req_Estimate_be_sent_to_Cust_Credit</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ISNEW_AND_Auth_Not_Blank_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>isnew_and_auth_not_blank</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>card_on_file</targetReference>
            </connector>
            <label>ISNEW() AND Auth Not Blank True</label>
        </rules>
    </decisions>
    <decisions>
        <name>Job_Status_Cancelled</name>
        <label>Job Status=Cancelled</label>
        <locationX>281</locationX>
        <locationY>3455</locationY>
        <defaultConnector>
            <targetReference>Send_payment_link_to_Cust_TRUE_Cash</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Job_Status_Cancelled_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Cancelled</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account__r.Comms_Control_Estimate_Emails__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Email_Customer</targetReference>
            </connector>
            <label>Job Status=Cancelled True</label>
        </rules>
    </decisions>
    <decisions>
        <name>Job_Status_Closed</name>
        <label>Job Status = Closed</label>
        <locationX>281</locationX>
        <locationY>4823</locationY>
        <defaultConnector>
            <targetReference>Job_Status_Rejected</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Job_Status_Closed_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_the_Job_Closure_Date</targetReference>
            </connector>
            <label>Job Status = Closed True</label>
        </rules>
    </decisions>
    <decisions>
        <name>Job_Status_Pending_and_raised_by_Engineer_Referral_cash_acc</name>
        <label>Job Status = Pending and raised by Engineer Referral (cash acc)</label>
        <locationX>512</locationX>
        <locationY>5279</locationY>
        <defaultConnector>
            <targetReference>Job_Status_Pending_and_raised_by_Engineer_Referral_credit_acc</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Job_Status_Pending_and_raised_by_Engineer_Referral_cash_acc_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Referral_email_sent__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>For Client Approval</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Type_Job_Reactive</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Engineer_Partner_Community_Profile</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Acc_Type_Cash</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Referral_Email_Sent</targetReference>
            </connector>
            <label>Job Status = Pending and raised by Engineer Referral (cash acc) True</label>
        </rules>
    </decisions>
    <decisions>
        <name>Job_Status_Pending_and_raised_by_Engineer_Referral_credit_acc</name>
        <label>Job Status = Pending and raised by Engineer Referral (credit acc)</label>
        <locationX>710</locationX>
        <locationY>5399</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Job_Status_Pending_and_raised_by_Engineer_Referral_credit_acc_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Engineer_Partner_Community_Profile</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Account_Type_is_Credit</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Referral_email_sent__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>For Client Approval</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Type_Job_Reactive</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Referral_Email_Sent2</targetReference>
            </connector>
            <label>Job Status = Pending and raised by Engineer Referral (credit acc) True</label>
        </rules>
    </decisions>
    <decisions>
        <name>Job_Status_Rejected</name>
        <label>Job Status=Rejected</label>
        <locationX>281</locationX>
        <locationY>5159</locationY>
        <defaultConnector>
            <targetReference>Job_Status_Pending_and_raised_by_Engineer_Referral_cash_acc</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Job_Status_Rejected_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Send_payment_link_to_customer_via_email__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Payment_Link_Sent_to_Customer_via_email__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Rejected</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account__r.Comms_Control_Estimate_Emails__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_sent_email_to_TRUE</targetReference>
            </connector>
            <label>Job Status=Rejected True</label>
        </rules>
    </decisions>
    <decisions>
        <name>Record_has_been_Unlocked_Cash</name>
        <label>Record has been Unlocked (Cash)</label>
        <locationX>281</locationX>
        <locationY>1487</locationY>
        <defaultConnector>
            <targetReference>Record_has_been_Unlocked_Credit</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Record_has_been_Unlocked_Cash_True</name>
            <conditionLogic>1 AND 2 AND (3 OR 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Approval_Process_Unlock_Record__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>For Client Approval</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Acc_Type_Cash</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Empty_Text</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Job_Status_to_Approved_by_Client_Cash</targetReference>
            </connector>
            <label>Record has been Unlocked (Cash) True</label>
        </rules>
    </decisions>
    <decisions>
        <name>Record_has_been_Unlocked_Credit</name>
        <label>Record has been Unlocked (Credit)</label>
        <locationX>281</locationX>
        <locationY>2183</locationY>
        <defaultConnector>
            <targetReference>Credit_Cust_Commence_Immediate</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Record_has_been_Unlocked_Credit_True</name>
            <conditionLogic>1 AND 2 AND (3 OR 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Approval_Process_Unlock_Record__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>For Client Approval</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Account_Type_is_Credit</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Account_Type_Key</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Job_Status_to_Approved_by_Client_Credit</targetReference>
            </connector>
            <label>Record has been Unlocked (Credit) True</label>
        </rules>
    </decisions>
    <decisions>
        <name>Send_payment_link_to_Cust_TRUE_Cash</name>
        <label>Send payment link to Cust=TRUE Cash</label>
        <locationX>281</locationX>
        <locationY>3911</locationY>
        <defaultConnector>
            <targetReference>Send_payment_link_to_Cust_TRUE_Credit</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Send_payment_link_to_Cust_TRUE_Cash_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Send_payment_link_to_customer_via_email__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Payment_Link_Sent_to_Customer_via_email__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Rejected</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account__r.Comms_Control_Estimate_Emails__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Acc_Type_Cash</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.is_Project__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_email_to_Cust</targetReference>
            </connector>
            <label>Send payment link to Cust=TRUE Cash True</label>
        </rules>
    </decisions>
    <decisions>
        <name>Send_payment_link_to_Cust_TRUE_Credit</name>
        <label>Send payment link to Cust=TRUE Credit</label>
        <locationX>281</locationX>
        <locationY>4367</locationY>
        <defaultConnector>
            <targetReference>Job_Status_Closed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Send_payment_link_to_Cust_TRUE_Credit_True</name>
            <conditionLogic>1 AND 2 AND 3 AND 4 AND 5 AND (6 OR 7)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Send_payment_link_to_customer_via_email__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Payment_Link_Sent_to_Customer_via_email__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Rejected</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account__r.Comms_Control_Estimate_Emails__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.is_Project__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Account_Type_is_Credit</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Account_Type_Key</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_email_to_Credit_cust</targetReference>
            </connector>
            <label>Send payment link to Cust=TRUE Credit True</label>
        </rules>
    </decisions>
    <description>ZS - Get Record Administrator updated to System Admin</description>
    <environments>Default</environments>
    <formulas>
        <name>card_on_file_formula</name>
        <dataType>Number</dataType>
        <expression>VALUE(LEFT({!$Record.Authorisation__r.asp04__Account_Reference__c}, 4))</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>isnew_and_auth_not_blank</name>
        <dataType>Boolean</dataType>
        <expression>ISCHANGED({!$Record.Authorisation__c}) || (ISNEW() &amp;&amp; ISBLANK({!$Record.Authorisation__c}) = FALSE)</expression>
    </formulas>
    <formulas>
        <name>Update_Job_Time</name>
        <dataType>DateTime</dataType>
        <expression>NOW()</expression>
    </formulas>
    <interviewLabel>PHASE 2 Job Created or Edited Processes {!$Flow.CurrentDateTime}</interviewLabel>
    <label>PHASE 2 Job Created or Edited Processes</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Administrator</name>
        <label>Get Administrator</label>
        <locationX>149</locationX>
        <locationY>1151</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Lock_Job</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>System Admin</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>User</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Administrator_0</name>
        <label>Get Administrator</label>
        <locationX>149</locationX>
        <locationY>1847</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Submit_for_Approval_Unlock_Cash</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>System Admin</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>User</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Administrator_0_0</name>
        <label>Get Administrator</label>
        <locationX>149</locationX>
        <locationY>2783</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Submit_for_Approval_Unlock_Credit</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>System Admin</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>User</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>card_on_file</name>
        <label>card on file</label>
        <locationX>149</locationX>
        <locationY>455</locationY>
        <connector>
            <targetReference>Eng_Req_Estimate_be_sent_to_Cust_Credit</targetReference>
        </connector>
        <inputAssignments>
            <field>Card_on_Record_Start__c</field>
            <value>
                <elementReference>card_on_file_formula</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Send_deposit_invoice_to_Credit_acc</name>
        <label>Send deposit invoice to Credit acc</label>
        <locationX>149</locationX>
        <locationY>2663</locationY>
        <connector>
            <targetReference>Get_Administrator_0_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Deposit_Invoice__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Credit_Deposit_Email__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>Customer_Invoice__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Set_Date_Time</name>
        <label>Set Date/Time</label>
        <locationX>149</locationX>
        <locationY>3695</locationY>
        <connector>
            <targetReference>Send_payment_link_to_Cust_TRUE_Cash</targetReference>
        </connector>
        <inputAssignments>
            <field>Date_Time_Estimate_Canx_email_sent_Cust__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Set_Job_Status_to_Approved_by_Client_Cash</name>
        <label>Set Job Status to Approved by Client (Cash)</label>
        <locationX>149</locationX>
        <locationY>1607</locationY>
        <connector>
            <targetReference>UNLock_WOs_Flow_Cash_0_0</targetReference>
        </connector>
        <inputAssignments>
            <field>Date_Time_Approval_Process_Unlock_Record__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Date_Time_Estimate_Approved_by_Customer__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Approved by Client</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>User_ticked_Approv_Process_Unlock_Record__c</field>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Set_Job_Status_to_Approved_by_Client_Credit</name>
        <label>Set Job Status to Approved by Client (Credit)</label>
        <locationX>149</locationX>
        <locationY>2303</locationY>
        <connector>
            <targetReference>UNLock_WOs_Flow_Credit_0_0</targetReference>
        </connector>
        <inputAssignments>
            <field>Date_Time_Approval_Process_Unlock_Record__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Date_Time_Estimate_Approved_by_Customer__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Estimate_Accepted_Email_Conf_Sent_Date__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Estimate_Accepted_Email_Conf_Sent__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Approved by Client</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>User_ticked_Approv_Process_Unlock_Record__c</field>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Job</name>
        <label>Update Job</label>
        <locationX>149</locationX>
        <locationY>911</locationY>
        <connector>
            <targetReference>Lock_WOs_0_0</targetReference>
        </connector>
        <inputAssignments>
            <field>Date_Time_Last_Estimate_sent_to_Customer__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Email_Estimate_Sent__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>For Client Approval</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Referral_Email_Sent</name>
        <label>Update Referral Email Sent</label>
        <locationX>314</locationX>
        <locationY>5399</locationY>
        <connector>
            <targetReference>Pending_Email_to_Customer</targetReference>
        </connector>
        <inputAssignments>
            <field>Referral_email_sent__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Referral_Email_Sent2</name>
        <label>Update Referral Email Sent2</label>
        <locationX>578</locationX>
        <locationY>5519</locationY>
        <connector>
            <targetReference>Pending_Email_to_Customer_credit_acc</targetReference>
        </connector>
        <inputAssignments>
            <field>Referral_email_sent__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_sent_email_to_TRUE</name>
        <label>Update sent email to TRUE</label>
        <locationX>50</locationX>
        <locationY>5279</locationY>
        <connector>
            <targetReference>Send_Rejected_Email_to_Cust</targetReference>
        </connector>
        <inputAssignments>
            <field>Payment_Link_Sent_to_Customer_via_email__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_the_Job_Closure_Date</name>
        <label>Update the Job Closure Date</label>
        <locationX>149</locationX>
        <locationY>4943</locationY>
        <connector>
            <targetReference>Job_Status_Rejected</targetReference>
        </connector>
        <inputAssignments>
            <field>Job_Closure_Date__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_to_say_sent_email_to_Cust</name>
        <label>Update to say sent email to Cust</label>
        <locationX>149</locationX>
        <locationY>4151</locationY>
        <connector>
            <targetReference>Send_payment_link_to_Cust_TRUE_Credit</targetReference>
        </connector>
        <inputAssignments>
            <field>Payment_Link_Sent_to_Customer_via_email__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_to_say_sent_email_to_Cust2</name>
        <label>Update to say sent email to Cust2</label>
        <locationX>149</locationX>
        <locationY>4607</locationY>
        <connector>
            <targetReference>Job_Status_Closed</targetReference>
        </connector>
        <inputAssignments>
            <field>Payment_Link_Sent_to_Customer_via_email__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>155</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>ISNEW_AND_Auth_Not_Blank_Des</targetReference>
        </connector>
        <object>Job__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Obsolete</status>
    <subflows>
        <name>Create_SA_s</name>
        <label>Create SA(s)</label>
        <locationX>149</locationX>
        <locationY>3239</locationY>
        <connector>
            <targetReference>Job_Status_Cancelled</targetReference>
        </connector>
        <flowName>PHASE_2_FL_Create_Service_Appointment_Credit_Cust_Accepts_Estimate_Start_Immedia</flowName>
        <inputAssignments>
            <name>var_JobID</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Lock_WOs_0_0</name>
        <label>Lock WOs</label>
        <locationX>149</locationX>
        <locationY>1031</locationY>
        <connector>
            <targetReference>Get_Administrator</targetReference>
        </connector>
        <flowName>PHASE_2_FL_Lock_WOs_Approval_Process_V2</flowName>
        <inputAssignments>
            <name>var_JobID</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>UNLock_WOs_Flow_Cash_0_0</name>
        <label>UNLock WOs Flow (Cash)</label>
        <locationX>149</locationX>
        <locationY>1727</locationY>
        <connector>
            <targetReference>Get_Administrator_0</targetReference>
        </connector>
        <flowName>PHASE_2_FL_UNLock_All_WOs_for_Job</flowName>
        <inputAssignments>
            <name>var_JobID</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>UNLock_WOs_Flow_Credit_0_0</name>
        <label>UNLock WOs Flow (Credit)</label>
        <locationX>149</locationX>
        <locationY>2423</locationY>
        <connector>
            <targetReference>Credit_Cust_Email_Confirm_Estimate_Accepted</targetReference>
        </connector>
        <flowName>PHASE_2_FL_UNLock_All_WOs_for_Job</flowName>
        <inputAssignments>
            <name>var_JobID</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <textTemplates>
        <name>EstimatesenttoCustomerforapprovalbytheEngineer</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;Estimate sent to Customer for approval by the Engineer - Job record should be locked.&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>Acc_Type_Cash</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Cash</stringValue>
        </value>
    </variables>
    <variables>
        <name>Account_Type_is_Credit</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Credit</stringValue>
        </value>
    </variables>
    <variables>
        <name>Account_Type_Key</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Key Account</stringValue>
        </value>
    </variables>
    <variables>
        <name>Empty_Text</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Engineer_Partner_Community_Profile</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Engineer Partner Community</stringValue>
        </value>
    </variables>
    <variables>
        <name>Estimate_Email_sent_to_Cust_lock_Job</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Estimate Email sent to Cust - lock Job</stringValue>
        </value>
    </variables>
    <variables>
        <name>Type_Job_Reactive</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Reactive</stringValue>
        </value>
    </variables>
</Flow>
