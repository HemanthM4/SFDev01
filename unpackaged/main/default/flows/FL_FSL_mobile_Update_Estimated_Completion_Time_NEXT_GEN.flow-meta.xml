<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <decisions>
        <name>Check_if_Date_Time_entered_is_after_Due_Date_1</name>
        <label>Check if Date/Time entered is after Due Date (1)</label>
        <locationX>1406</locationX>
        <locationY>1484</locationY>
        <defaultConnector>
            <targetReference>ScreenDate_Time_entered_is_after_Due_Date_not_blank</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>After_Due_Date_1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DateTimeSchedEndTimeEntry</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>var_ServiceApptData.DueDate</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ScreenDate_Time_entered_is_after_Due_Date_not_blank</targetReference>
            </connector>
            <label>After Due Date (1)</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_Date_Time_entered_is_after_Due_Date_1_0</name>
        <label>Check if Date/Time entered is after Due Date (1)</label>
        <locationX>1407</locationX>
        <locationY>752</locationY>
        <defaultConnector>
            <targetReference>Update_Sched_End_Time_Original_Scheduled_End_is_blank</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>After_Due_Date_1_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DateTimeSchedEndTimeEntry</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>var_ServiceApptData.DueDate</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ScreenDate_Time_entered_is_after_Due_Date_0</targetReference>
            </connector>
            <label>After Due Date (1)</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_new_SchedEndTime_is_less_than_SchedStartTime_1</name>
        <label>Check if new SchedEndTime is less than SchedStartTime (1)</label>
        <locationX>1186</locationX>
        <locationY>1340</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>New_SchedEndTime_is_less_than_SchedStartTime_1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DateTimeSchedEndTimeEntry</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>var_ServiceApptData.SchedStartTime</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ScreenNew_Estimated_Completion_Time_Less_than_SchedStartTime</targetReference>
            </connector>
            <label>New SchedEndTime is less than SchedStartTime (1)</label>
        </rules>
        <rules>
            <name>New_SchedEndTime_is_equal_to_or_greater_than_SchedStartTime_1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DateTimeSchedEndTimeEntry</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>var_ServiceApptData.SchedStartTime</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_if_Date_Time_entered_is_after_Due_Date_1</targetReference>
            </connector>
            <label>New SchedEndTime is equal to or greater than SchedStartTime (1)</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_new_SchedEndTime_is_less_than_SchedStartTime_2</name>
        <label>Check if new SchedEndTime is less than SchedStartTime (2)</label>
        <locationX>1167</locationX>
        <locationY>877</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>New_SchedEndTime_is_less_than_SchedStartTime_2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DateTimeSchedEndTimeEntry</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>var_ServiceApptData.SchedStartTime</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ScreenNew_Estimated_Completion_Time_Less_than_SchedStartTime_0</targetReference>
            </connector>
            <label>New SchedEndTime is less than SchedStartTime (2)</label>
        </rules>
        <rules>
            <name>New_SchedEndTime_is_equal_to_or_greater_than_SchedStartTime_2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DateTimeSchedEndTimeEntry</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>var_ServiceApptData.SchedStartTime</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_if_Date_Time_entered_is_after_Due_Date_1_0</targetReference>
            </connector>
            <label>New SchedEndTime is equal to or greater than SchedStartTime (2)</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_Original_Scheduled_End_is_blank</name>
        <label>Check if Original Scheduled End is blank</label>
        <locationX>996</locationX>
        <locationY>1178</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Original_Scheduled_End_is_blank</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>var_ServiceApptData.Original_Scheduled_End__c</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <conditions>
                <leftValueReference>var_ServiceApptData.Original_Scheduled_End__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_if_new_SchedEndTime_is_less_than_SchedStartTime_2</targetReference>
            </connector>
            <label>Original Scheduled End is blank</label>
        </rules>
        <rules>
            <name>Original_Scheduled_End_is_NOT_blank</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_ServiceApptData.Original_Scheduled_End__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_if_new_SchedEndTime_is_less_than_SchedStartTime_1</targetReference>
            </connector>
            <label>Original Scheduled End is NOT blank</label>
        </rules>
    </decisions>
    <description>HM

Patch Due date Issue</description>
    <interviewLabel>FL - FSL (mobile) - Update Estimated Completion Time NEXT GEN {!$Flow.CurrentDateTime}</interviewLabel>
    <label>FL - FSL (mobile) - Update Estimated Completion Time NEXT GEN</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>FieldServiceMobile</processType>
    <recordLookups>
        <name>Service_Appt_Data</name>
        <label>Service Appt. Data</label>
        <locationX>571</locationX>
        <locationY>1168</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>ScreenSet_New_Estimated_Completion_Time</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>CreatedDate</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </filters>
        <object>ServiceAppointment</object>
        <outputReference>var_ServiceApptData</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>SchedStartTime</queriedFields>
        <queriedFields>SchedEndTime</queriedFields>
        <queriedFields>Original_Scheduled_End__c</queriedFields>
        <queriedFields>DueDate</queriedFields>
    </recordLookups>
    <recordUpdates>
        <name>Update_Due_Date</name>
        <label>Update Due Date</label>
        <locationX>709</locationX>
        <locationY>306</locationY>
        <connector>
            <targetReference>ScreenNew_Estimated_Completion_Time_Updated</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>var_ServiceApptData.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>DueDate</field>
            <value>
                <elementReference>DateTimeSchedEndTimeEntry</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SchedEndTime</field>
            <value>
                <elementReference>DateTimeSchedEndTimeEntry</elementReference>
            </value>
        </inputAssignments>
        <object>ServiceAppointment</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Sched_End_Time_Original_Scheduled_End_is_blank</name>
        <label>Update Sched End Time Original Scheduled End is blank</label>
        <locationX>1785</locationX>
        <locationY>772</locationY>
        <connector>
            <targetReference>ScreenNew_Estimated_Completion_Time_Updated</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>var_ServiceApptData.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>DueDate</field>
            <value>
                <elementReference>DateTimeSchedEndTimeEntry</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Original_Scheduled_End__c</field>
            <value>
                <elementReference>var_ServiceApptData.SchedEndTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SchedEndTime</field>
            <value>
                <elementReference>DateTimeSchedEndTimeEntry</elementReference>
            </value>
        </inputAssignments>
        <object>ServiceAppointment</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Sched_End_Time_Original_Scheduled_End_is_NOT_blank</name>
        <label>Update Sched End Time Original Scheduled End is NOT blank</label>
        <locationX>2077</locationX>
        <locationY>1581</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>var_ServiceApptData.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>DueDate</field>
            <value>
                <elementReference>DateTimeSchedEndTimeEntry</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SchedEndTime</field>
            <value>
                <elementReference>DateTimeSchedEndTimeEntry</elementReference>
            </value>
        </inputAssignments>
        <object>ServiceAppointment</object>
    </recordUpdates>
    <screens>
        <name>ScreenDate_Time_entered_is_after_Due_Date_0</name>
        <label>Date/Time entered is after Due Date</label>
        <locationX>1076</locationX>
        <locationY>197</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Update_Due_Date</targetReference>
        </connector>
        <fields>
            <name>DTxtDate_Time_entered_is_after_Due_Date_0</name>
            <fieldText>&lt;p&gt;The date/time you entered of {!DateTimeSchedEndTimeEntry} is after the Service Appointment Due Date of {!var_ServiceApptData.DueDate}.&lt;/p&gt;&lt;p&gt;The Scheduled end date and Due date will be modified.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Due date is not blank</description>
        <name>ScreenDate_Time_entered_is_after_Due_Date_not_blank</name>
        <label>Date/Time entered is after Due Date not blank</label>
        <locationX>1773</locationX>
        <locationY>1574</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Update_Sched_End_Time_Original_Scheduled_End_is_NOT_blank</targetReference>
        </connector>
        <fields>
            <name>UpdateScr</name>
            <fieldText>&lt;p&gt;The date/time you entered of {!DateTimeSchedEndTimeEntry} is after the Service Appointment Due Date of {!var_ServiceApptData.DueDate}.&lt;/p&gt;&lt;p&gt;The Scheduled end date and Due date will be modified.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>ScreenNew_Estimated_Completion_Time_Less_than_SchedStartTime</name>
        <label>New Estimated Completion Time Less than SchedStartTime</label>
        <locationX>867</locationX>
        <locationY>1584</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>ScreenSet_New_Estimated_Completion_Time</targetReference>
        </connector>
        <fields>
            <name>DisplayTxtNew_Estimated_Completion_Time_Less_than_SchedStartTime</name>
            <fieldText>&lt;p&gt;The ETC you entered ({!DateTimeSchedEndTimeEntry}) is earlier than the Scheduled start date/time of {!var_ServiceApptData.SchedStartTime}.&lt;/p&gt;&lt;p&gt;Please press Next to enter a new date/time &lt;i&gt;after &lt;/i&gt;the Scheduled start date/time.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>ScreenNew_Estimated_Completion_Time_Less_than_SchedStartTime_0</name>
        <label>New Estimated Completion Time Less than SchedStartTime</label>
        <locationX>970</locationX>
        <locationY>682</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>ScreenSet_New_Estimated_Completion_Time</targetReference>
        </connector>
        <fields>
            <name>DisplayTxtNew_Estimated_Completion_Time_Less_than_SchedStartTime_0</name>
            <fieldText>&lt;p&gt;The ETC you entered ({!DateTimeSchedEndTimeEntry}) is earlier than the Scheduled start date/time of {!var_ServiceApptData.SchedStartTime}.&lt;/p&gt;&lt;p&gt;Please press Next to enter a new date/time &lt;i&gt;after &lt;/i&gt;the Scheduled start date/time.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>ScreenNew_Estimated_Completion_Time_Updated</name>
        <label>New Estimated Completion Time Updated</label>
        <locationX>2087</locationX>
        <locationY>934</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>DisplayTxtSetNewCompletionTimeConfirmation</name>
            <fieldText>&lt;p&gt;Estimated time for completion has been updated to &lt;b&gt;{!DateTimeSchedEndTimeEntry}&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Please press Next to finish and exit.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>ScreenSet_New_Estimated_Completion_Time</name>
        <label>Set New Estimated Completion Time</label>
        <locationX>696</locationX>
        <locationY>1169</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Check_if_Original_Scheduled_End_is_blank</targetReference>
        </connector>
        <fields>
            <name>DisplayTxtSetNewCompletionTime</name>
            <fieldText>&lt;p&gt;Current estimated time for completion is: &lt;b&gt;{!var_ServiceApptData.SchedEndTime}&lt;/b&gt;&lt;/p&gt;&lt;p&gt;If required amend your estimated completion time below.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>DateTimeSchedEndTimeEntry</name>
            <dataType>DateTime</dataType>
            <defaultValue>
                <elementReference>var_ServiceApptData.SchedEndTime</elementReference>
            </defaultValue>
            <fieldText>Please amend if required:</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>50</locationX>
        <locationY>919</locationY>
        <connector>
            <targetReference>Service_Appt_Data</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>Id</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_ServiceApptData</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
</Flow>
